(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332],{2936:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return s(6738)}])},6738:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>y});var a=s(7876),r=s(4232);let l=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},n=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim()};var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let c=(0,r.forwardRef)((e,t)=>{let{color:s="currentColor",size:a=24,strokeWidth:l=2,absoluteStrokeWidth:c,className:i="",children:d,iconNode:h,...u}=e;return(0,r.createElement)("svg",{ref:t,...o,width:a,height:a,stroke:s,strokeWidth:c?24*Number(l)/Number(a):l,className:n("lucide",i),...!d&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(u)&&{"aria-hidden":"true"},...u},[...h.map(e=>{let[t,s]=e;return(0,r.createElement)(t,s)}),...Array.isArray(d)?d:[d]])}),i=(e,t)=>{let s=(0,r.forwardRef)((s,a)=>{let{className:o,...i}=s;return(0,r.createElement)(c,{ref:a,iconNode:t,className:n("lucide-".concat(l(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),o),...i})});return s.displayName=l(e),s},d=i("hard-drive-upload",[["path",{d:"m16 6-4-4-4 4",key:"13yo43"}],["path",{d:"M12 2v8",key:"1q4o3n"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",key:"w68u3i"}],["path",{d:"M6 18h.01",key:"uhywen"}],["path",{d:"M10 18h.01",key:"h775k"}]]),h=i("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),u=i("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),x=i("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),m=i("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),f=i("file",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]),p=i("bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]),b=i("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),g=i("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);function y(){let[e,t]=(0,r.useState)([{role:"ai",content:"Hello! Upload some documents and I'll answer questions based on their content."}]),[s,l]=(0,r.useState)(""),[n,o]=(0,r.useState)(!1),[c,i]=(0,r.useState)([]),[y,j]=(0,r.useState)(!1),[w,N]=(0,r.useState)({}),[k,v]=(0,r.useState)([]),[C,S]=(0,r.useState)([]),[E,M]=(0,r.useState)(!0),[_,A]=(0,r.useState)(""),z=(0,r.useRef)(null),D=(0,r.useRef)(null),O="https://rag-render.onrender.com";(0,r.useEffect)(()=>{var e;null==(e=z.current)||e.scrollIntoView({behavior:"smooth"})},[e]),(0,r.useEffect)(()=>{q()},[]);let q=async()=>{M(!0),A("");try{let e=await fetch("".concat(O,"/list_files"));if(!e.ok)throw Error("Network response was not ok (".concat(e.status,")"));let t=await e.json();v(t.files||[])}catch(e){console.error("Failed to fetch documents:",e),A("Failed to connect to the backend. This is likely a CORS issue or the server is down. Please ensure the server at ".concat(O," is running and allows requests from this origin."))}finally{M(!1)}},P=async()=>{if(!s.trim()||n)return;let e=s.trim();t(t=>[...t,{role:"user",content:e}]),l(""),o(!0),A("");try{let s=await fetch("".concat(O,"/ask"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:e,filters:C})});if(!s.ok)throw Error("Network response was not ok (".concat(s.status,")"));let a=await s.json();t(e=>[...e,{role:"ai",content:a.answer||"Sorry, I couldn't get a response."}])}catch(e){console.error("Error asking question:",e),t(e=>[...e,{role:"ai",content:"An error occurred while trying to get an answer. Please check the server and console for details."}])}finally{o(!1)}},U=async()=>{if(0!==c.length){for(let e of(j(!0),A(""),N(c.reduce((e,t)=>(e[t.name]={status:"uploading",progress:0},e),{})),c))try{let t=new FormData;t.append("file",e);let s=await fetch("".concat(O,"/upload"),{method:"POST",body:t});if(s.ok)N(t=>({...t,[e.name]:{status:"success"}}));else{let e=await s.json().catch(()=>({error:"Upload failed with non-JSON response"}));throw Error(e.error||"Upload failed with status ".concat(s.status))}}catch(t){console.error("Failed to upload ".concat(e.name,":"),t),N(s=>({...s,[e.name]:{status:"error",message:t.message}})),A("Failed to upload ".concat(e.name,". Please check server logs."))}j(!1),i([]),await q()}},F=e=>{let t=Array.from(e.target.files);i(e=>[...e,...t])},T=e=>{e.preventDefault(),e.stopPropagation();let t=Array.from(e.dataTransfer.files);t.length>0&&i(e=>[...e,...t])},R=e=>{e.preventDefault(),e.stopPropagation()};return(0,a.jsxs)("div",{className:"h-screen w-screen bg-slate-100 flex flex-col lg:flex-row font-sans",children:[(0,a.jsx)(()=>(0,a.jsxs)("aside",{className:"w-full lg:w-1/3 xl:w-1/4 bg-slate-50 border-r border-slate-200 p-6 flex flex-col space-y-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-slate-800",children:"AI Assistant"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-slate-700 mb-3",children:"Upload Documents"}),(0,a.jsxs)("div",{className:"border-2 border-dashed border-slate-300 rounded-lg p-6 text-center bg-white hover:border-blue-500 hover:bg-blue-50 transition-colors cursor-pointer",onDrop:T,onDragOver:R,onClick:()=>{var e;return null==(e=D.current)?void 0:e.click()},children:[(0,a.jsx)(d,{className:"mx-auto h-12 w-12 text-slate-400"}),(0,a.jsxs)("p",{className:"mt-2 text-sm text-slate-600",children:["Drag & drop files here, or ",(0,a.jsx)("span",{className:"font-semibold text-blue-600",children:"browse"})]}),(0,a.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"Supports PDF, MD"}),(0,a.jsx)("input",{type:"file",ref:D,multiple:!0,accept:".pdf,.md",onChange:F,className:"hidden"})]}),c.length>0&&(0,a.jsxs)("div",{className:"mt-4 space-y-2",children:[c.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between bg-slate-100 p-2 rounded-md text-sm",children:[(0,a.jsx)("span",{className:"truncate text-slate-700",children:e.name}),(0,a.jsx)("button",{onClick:()=>{var t;return t=e.name,void i(e=>e.filter(e=>e.name!==t))},className:"text-slate-500 hover:text-red-600",children:(0,a.jsx)(h,{size:16})})]},e.name)),(0,a.jsx)("button",{onClick:U,disabled:y,className:"w-full flex items-center justify-center gap-2 bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-blue-700 disabled:bg-blue-400 transition-colors",children:y?(0,a.jsx)(u,{className:"animate-spin"}):"Upload "+c.length+" File(s)"})]}),Object.keys(w).length>0&&!y&&(0,a.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,a.jsx)("h3",{className:"text-sm font-semibold",children:"Upload Status:"}),Object.entries(w).map(e=>{let[t,{status:s,message:r}]=e;return(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm p-2 rounded-md ".concat("success"===s?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:["success"===s?(0,a.jsx)(x,{size:16}):(0,a.jsx)(m,{size:16}),(0,a.jsxs)("span",{className:"truncate",children:[t," - ",s]}),r&&(0,a.jsx)("span",{className:"text-xs",children:r})]},t)}),(0,a.jsx)("button",{onClick:()=>N({}),className:"text-xs text-slate-500 hover:underline mt-2",children:"Clear status"})]})]}),(0,a.jsxs)("div",{className:"flex-grow flex flex-col min-h-0",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-slate-700 mb-3",children:"Select Context"}),_&&(0,a.jsxs)("div",{className:"p-3 mb-4 bg-red-100 border border-red-300 text-red-800 rounded-lg text-sm",role:"alert",children:[(0,a.jsxs)("p",{className:"font-bold flex items-center gap-2",children:[(0,a.jsx)(m,{size:16}),"Connection Error"]}),(0,a.jsx)("p",{className:"mt-1",children:_})]}),(0,a.jsx)("div",{className:"flex-grow bg-white border border-slate-200 rounded-lg p-3 overflow-y-auto",children:E?(0,a.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,a.jsx)(u,{className:"animate-spin text-slate-400"})}):k.length>0?(0,a.jsx)("ul",{className:"space-y-2",children:k.map(e=>(0,a.jsx)("li",{children:(0,a.jsxs)("label",{className:"flex items-center gap-3 p-3 rounded-lg cursor-pointer transition-colors ".concat(C.includes(e)?"bg-blue-100 border-blue-300":"bg-slate-50 hover:bg-slate-100"),children:[(0,a.jsx)("input",{type:"checkbox",checked:C.includes(e),onChange:()=>{S(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},className:"form-checkbox h-5 w-5 text-blue-600 rounded border-slate-300 focus:ring-blue-500"}),(0,a.jsx)(f,{className:"h-5 w-5 text-slate-600"}),(0,a.jsx)("span",{className:"flex-grow text-sm font-medium text-slate-800 truncate",children:e})]})},e))}):(0,a.jsx)("div",{className:"text-center text-sm text-slate-500 h-full flex items-center justify-center px-4",children:!_&&"No documents found. Upload some to get started."})})]})]}),{}),(0,a.jsx)(()=>(0,a.jsxs)("main",{className:"flex-1 flex flex-col bg-white",children:[(0,a.jsx)("div",{className:"flex-1 p-6 overflow-y-auto",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-start gap-4 ".concat("user"===e.role?"justify-end":""),children:["ai"===e.role&&(0,a.jsx)("div",{className:"flex-shrink-0 h-10 w-10 bg-slate-200 rounded-full flex items-center justify-center",children:(0,a.jsx)(p,{className:"text-slate-600"})}),(0,a.jsx)("div",{className:"max-w-lg p-4 rounded-xl ".concat("user"===e.role?"bg-blue-600 text-white":"bg-slate-100 text-slate-800"),children:(0,a.jsx)("p",{className:"whitespace-pre-wrap",children:e.content})}),"user"===e.role&&(0,a.jsx)("div",{className:"flex-shrink-0 h-10 w-10 bg-slate-200 rounded-full flex items-center justify-center",children:(0,a.jsx)(b,{className:"text-slate-600"})})]},t)),n&&(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[(0,a.jsx)("div",{className:"flex-shrink-0 h-10 w-10 bg-slate-200 rounded-full flex items-center justify-center",children:(0,a.jsx)(p,{className:"text-slate-600"})}),(0,a.jsx)("div",{className:"max-w-lg p-4 rounded-xl bg-slate-100 text-slate-800",children:(0,a.jsx)(u,{className:"animate-spin"})})]}),(0,a.jsx)("div",{ref:z})]})}),(0,a.jsx)("div",{className:"bg-white border-t border-slate-200 p-4",children:(0,a.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("textarea",{value:s,onChange:e=>l(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),P())},placeholder:"Ask a question based on the selected documents...",className:"w-full h-12 p-3 pr-20 border border-slate-300 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-blue-500",rows:1}),(0,a.jsx)("button",{onClick:P,disabled:n||!s.trim(),className:"absolute right-3 top-1/2 -translate-y-1/2 bg-blue-600 text-white p-2 rounded-full hover:bg-blue-700 disabled:bg-blue-400 disabled:cursor-not-allowed transition-colors",children:(0,a.jsx)(g,{})})]})})})]}),{})]})}}},e=>{e.O(0,[636,593,792],()=>e(e.s=2936)),_N_E=e.O()}]);